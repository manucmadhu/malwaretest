import psutil
import subprocess
import time

def monitor_process(proc):
    proc_info = {
        'pid': proc.pid,
        'name': proc.name(),
        'cpu_usage': proc.cpu_percent(interval=1.0),
        'memory_usage': proc.memory_info().rss,
        'open_files': proc.open_files(),
        'connections': proc.connections()
    }
    return proc_info

def run_and_monitor(file_path):
    process = subprocess.Popen(file_path, shell=True)
    time.sleep(5)  # Let the process run for a short period

    proc_info = monitor_process(psutil.Process(process.pid))

    process.terminate()  # Terminate the process after monitoring

    return proc_info
